# Online E-Commerce System for Small Businesses

Simple C++ console-based e-commerce system for course work.

The system is fully menu-driven and supports two roles:

- **Admin** – manages products and system settings
- **Customer** – browses products, manages a shopping cart, and checks out

Product and configuration data are persisted across runs using plain text files: `products.txt` and `settings.txt`.

---

## Features

### Admin

- Admin login (credentials configurable in `settings.txt`)
- View all active products
- Search product by (partial) name, case-insensitive
- Add new products (name, price, stock)
- Update existing products:
  - Change name (optional, can leave blank)
  - Change price (or keep current)
  - Change stock (or keep current)
- Soft delete products:
  - Products are marked inactive instead of completely removed
  - Keeps product IDs consistent across sessions
- Edit system settings:
  - Maximum login attempts
  - Discount threshold and discount rate
  - Admin and customer usernames/passwords
- All product changes are saved back to `products.txt`

### Customer

- Customer login (credentials configurable in `settings.txt`)
- View all active products
- Search product by (partial) name
- Add products to a shopping cart with stock validation
- Update cart item quantities:
  - Increase/decrease quantity
  - Set quantity to `0` to remove an item
- View cart:
  - Shows per-item totals and cart subtotal
- Checkout:
  - Displays order summary with subtotal, discount and final total
  - Applies discount automatically if subtotal ≥ `discountThreshold`
  - Simulated payment confirmation
  - Deducts purchased quantities from product stock
  - Persists updated stock to `products.txt`

### General / Implementation

- Simple input validation for numeric input
- File handling:
  - Reads/writes products and settings from/to text files
  - Automatically generates default `products.txt` and `settings.txt`
    if they are missing on startup
- Uses arrays (`Product[]` and `CartItem[]`) for product list and shopping cart
- Loops, conditionals, modular functions

---

## Limitations

- No database implementation (file-based only)
- Only one admin account and one customer account at a time
- No multi-user concurrency; single-console interactive use

---

## Data Files

The program uses two main text files in the working directory:

### `products.txt`

Each line represents a product and has the format:

```text
id|name|price|stock|active
```

- `id` (int): unique product ID (starting from 1)
- `name` (string): product name
- `price` (double): price in RM
- `stock` (int): available quantity
- `active` (0/1):
  - `1` = active/visible
  - `0` = inactive (soft deleted)

Example (default contents generated by the program if missing):

```text
1|Phone Case|35|20|1
2|Airpods    |90|20|1
3|ScreenProtector|45|20|1
4|Phone Holder|67|20|1
5|Powerbank|110|20|1
6|Charging Cable|30|20|1
```

### `settings.txt`

Key–value pairs in the form `key=value`:

- `maxAttempts` (int): maximum login attempts before lockout
- `discountThreshold` (double): minimum cart subtotal to qualify for discount
- `discountRate` (double): discount rate (e.g. `0.10` for 10%)
- `adminUsername` (string)
- `adminPassword` (string)
- `customerUsername` (string)
- `customerPassword` (string)

Example (default contents generated by the program if missing):

```text
maxAttempts=3
discountThreshold=1000.0
discountRate=0.10
adminUsername=admin
adminPassword=admin123
customerUsername=user
customerPassword=user123
```

The admin can change all of these values through the **Edit system settings** menu option; the program then rewrites `settings.txt` with the updated values.

---

## Repository Layout

- `/src`
  - `main.cpp`         → the main program
- `/assets`
  - `markdown/*`       → Mermaid syntax codes
  - `image/*`          → Flowchart images
- `Makefile`           → build helper
- `CMakeLists.txt`     → cross-platform build
- `build.bat`          → Windows batch build
- `build.ps1`          → PowerShell build
- `.github/workflows/ci.yml` → CI to build on Linux/macOS/Windows
- `.gitignore`
- `products.txt`       → product data (id|name|price|stock|active)
- `settings.txt`       → system settings (auto-created if missing)

---

## Build & Run (Linux / macOS / WSL)

1. **Clone the repo:**

   ```bash
   git clone <repo-url>
   cd ecom-sys
   ```

2. **Build with make:**

   ```bash
   make
   # or directly:
   g++ -std=c++17 src/main.cpp -o ecommerce
   ```

3. **Or use CMake (recommended cross-platform):**

   ```bash
   mkdir build && cd build
   cmake ..
   cmake --build .
   ```

4. **Run:**

   ```bash
   ./ecommerce      # or ecommerce.exe on Windows
   ```

---

## Run Instructions

- Open a terminal in the directory containing the `ecommerce` executable.
- Run the program:

  ```bash
  ./ecommerce
  ```

- On the **first run**:
  - If `products.txt` and/or `settings.txt` do not exist, the program:
    - Uses built-in defaults
    - Automatically generates `products.txt` and `settings.txt` with default values
- On subsequent runs:
  - The program loads existing `products.txt` and `settings.txt`,
    so product changes and updated settings persist across sessions.

---

## Usage Overview

1. At startup, the program:
   - Loads settings and products from `settings.txt` and `products.txt`
   - Generates them with defaults if missing
   - Displays a banner and a brief “How to use the system” guide

2. The login screen lets you choose:
   - `1` – Admin
   - `2` – Customer
   - `0` – Exit

3. Use the credentials from `settings.txt`. For a fresh setup (defaults):
   - Admin:
     - Username: `admin`
     - Password: `admin123`
   - Customer:
     - Username: `user`
     - Password: `user123`

4. After successful login:
   - Admin sees the **ADMIN MENU** (manage products and settings).
   - Customer sees the **CUSTOMER MENU** (browse products, cart, checkout).

You can log out from the menu, and optionally log in again as a different role.

---

## Notes

- For Windows users without make/CMake installed, use `build.bat` or `build.ps1` (requires `g++` or MSVC).
- CI is configured to build with CMake on Linux, macOS, and Windows.
- All interactions are via the console; no GUI or web interface is provided.
